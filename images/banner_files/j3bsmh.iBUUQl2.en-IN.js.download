(this.$WP=this.$WP||[]).push(["j3bsmh",(e,s)=>{var n,a,t,o,r,i,l,c,d,u,p,m,g,h,_,b,f,v,M,w,y,C,k,T,S,I,N,x,E,O,q,G,L,F,R=e=>{var{fetching:s,bucket:n}=S({experiment:"fedcm_rollback_1753288793",logImpression:!0},e);return{fetching:s,rollbackFedcm:n?"test"===n:null}},j=()=>document.getElementById("credential_picker_iframe"),z=e=>e+61+49,D=()=>({top:z(0),bottom:0}),P={oneTapMessageContainer:"ZkqhQ Gi B1 Z BB Cj Za",oneTapMessageMobileContainer:"SuwMt D Gi l",oneTapMessageInnerContainer:"QnnKe z",oneTapIcon:"MPoqM Cj",headline:"LcmJt Cj Hn o q f u",rtl:"wVHIl",subhead:"ZnAJV Cj o q"},B=({bottom:e})=>{var s=m(),{userAgentCategory:o}=h();return t(()=>"MOBILE"===o,[o])?n("div",{className:v(P.oneTapMessageMobileContainer,P.oneTapMessageContainer),style:{bottom:`${e||0}px`},children:n("div",{className:P.oneTapMessageInnerContainer,children:a("h3",{className:P.headline,children:[n("span",{className:P.oneTapIcon,children:n(M,{})}),n(p,{id:"onetap_message_unlock",messages:"Unlock the best of Tripadvisor"})," "]})})}):n("div",{className:v(P.oneTapMessageContainer,{[P.rtl]:s}),children:a("div",{className:P.oneTapMessageInnerContainer,children:[a("h3",{className:P.headline,children:[n("span",{className:P.oneTapIcon,children:n(M,{})}),n(p,{id:"onetap_message_unlock",messages:"Unlock the best of Tripadvisor"})," "]}),a("p",{className:P.subhead,children:[n(p,{id:"onetap_message_subhead_to_get_the_most",messages:"Sign in to get the most out of Tripadvisor"})," "]})]})})},$=({shown:e,isContextualMessagingEnabled:s,onShow:a,colorScheme:t})=>{var{bottom:i}=N(),[l,c]=o(!1),[d,u]=o(0);return r(()=>{if(!e)return()=>{};var n=j();if(n){if(n.style.bottom=`${i}px`,n.style.zIndex="10105",t&&(n.style.colorScheme=t),!s)return()=>{};var a,o=new MutationObserver(e=>{var s=e?.[0]?.target;if(s instanceof HTMLElement){clearTimeout(a);var n=parseInt(s?.style?.height||"0",10),t=isNaN(n)?0:n-9;a=setTimeout(()=>{u(t),c(t>0)},400)}});return o.observe(n,{attributes:!0}),()=>{o.disconnect(),clearTimeout(a)}}return()=>{}},[i,e,s,t]),r(()=>{e&&a&&a()},[e,a]),e&&l?n(x,{bottom:d+i}):null},A=({shown:e,containerId:s,isContextualMessagingEnabled:t,onShow:l,colorScheme:c})=>{var{top:d}=N(),[u,p]=o(!1),m=i(null);return r(()=>{if(e&&m&&m.current){var s=m.current.children[0];s&&(s.style.zIndex="10107",s.children&&0!==s.children.length&&(s.children[0].onload=()=>{p(t)}))}},[e,t]),r(()=>{e&&l&&l()},[e,l]),a("div",{className:v("mxEhR D y G- Za f e u",{LEMGe:!e,lXLYF:"light"===c,ygxFS:"dark"===c}),style:{top:d},children:[u&&n(x,{}),n("div",{id:s,className:"hRNvt M0",ref:m})]})},Z=({logImpression:e})=>{var{fetching:s,bucket:n}=S({experiment:"google_one_tap_disable_auto_login_1714679068",logImpression:e});return{fetching:s,isDisableAutoLoginExperiment:s?null:"test"===n}},H="GOOGLE_ONETAP",V=()=>{var e=l(()=>I.remove("g_state"),[]);return r(()=>e,[e]),e},Q=({onNotDisplayed:e,onUserSkipped:s,onCredentialReady:n,onAutoCancelled:a,onGeneralSkipDismiss:c,isFedcmEligible:d,containerId:u,flow:p,pid:m,pause:g})=>{var h=i(null),[_,b]=o(!1),f=T(),v=q(),M=w({skipImpression:!1}),{fetching:S,isDisableAutoLoginExperiment:I}=Z({logImpression:!0}),N=l((e,s)=>{f({module:"google_onetap",action:e,context:`${s}|${p}|isFedCM: ${d}`,value:m})},[p,m,f,d]),x=l(e=>{e&&(N("credentials_success",e.select_by),n(e.credential),b(!1))},[n,N]),E=l((s,n)=>{!M&&(N("display_event",n||"success"),y(s),b(s),s||e())},[e,N,M]),O=l(e=>{N("skipped_event",e),b(!1),"user_cancel"===e||"unknown_reason"===e?s():"auto_cancel"===e?a():c&&c("skipped",e)},[s,a,c,N]),G=l(e=>{N("dismiss_event",e),b(!1),c&&"credential_returned"!==e&&c("dismissed",e)},[N,c]),L=l(e=>{switch(v(),e.getMomentType()){case"display":E(e.isDisplayed(),e.getNotDisplayedReason());break;case"skipped":O(d?"unknown_reason":e.getSkippedReason());break;case"dismissed":G(e.getDismissedReason())}},[v,E,O,d,G]),F=l(e=>{if(null===h.current&&!S&&!g){h.current=e,N("requested","na");var s={client_id:"1070328450902.apps.googleusercontent.com",callback:x,cancel_on_tap_outside:!1,prompt_parent_id:u,auto_select:!I&&!C(),use_fedcm_for_prompt:d};e.initialize(s),e.prompt(L)}},[S,g,N,x,u,I,d,L]);return r(()=>{N("script_requested","na"),k("https://accounts.google.com/gsi/client","MEMX").then(()=>{var e=()=>F(window.google.accounts.id);window.google?.accounts?.id?.initialize?e():window.onGoogleLibraryLoad=e})},[F,N]),r(()=>()=>{h.current&&h.current.cancel()},[]),t(()=>({shown:_}),[_])},X=({enhancedGoogleOneTapGate:e})=>t(()=>e?{pid:40670,flow:H,deferShowOverlay:!0}:{pid:40185,flow:H,deferShowOverlay:!0},[e]),J="tripGoogleOnetapContainer",U=({trackWouldOpenExplicitPreferences:e,openExplicitPreferences:s,explicitPreferencesEnabled:a,servletName:t,enhancedGoogleOneTapGate:o,onDismiss:i,onShow:c,onSuccessfulLogin:p,onAutoCancelled:m,triggerNext:v,suppressContextualMessage:M,onIFrameShown:w,isFullScreen:y,fullScreenHeader:C})=>{var{login:k}=u(),{login:T}=u(),S=L({enhancedGoogleOneTapGate:o}),I=g(),{fetching:N,isTermsPageExperiment:x}=b(),{fetching:q,isNoCloseModal:z}=f(),D=!N&&!!x,P=!q&&!!z,{browser:B}=h(),$="CHROME"===B.family&&B.majorVersion>=108,{fetching:A,rollbackFedcm:Z}=R(!$),H=l(n=>{k({extraQueryParams:{google_id_token:n,isFedCM:$&&!Z},isFullScreen:!!y,closeX:!D,disableCloseOptions:P,fullScreenHeader:C,onSwitchFlow:e=>{T(e)},onSuccess:n=>{p&&n&&n.userId&&p(!!n.hasCreatedMember,n.userId),n&&!0===n.hasCreatedMember&&(e&&e(),a&&s&&s())},onClose:()=>{_.has(I)||window.location.reload()},...S})},[k,$,Z,y,D,P,C,S,T,p,e,a,s,I]),{shown:V}=G({onNotDisplayed:()=>{v(),i(!0)},onUserSkipped:()=>i(!0),onAutoCancelled:()=>{m&&m()},onGeneralSkipDismiss:()=>i(!1),onCredentialReady:H,isFedcmEligible:$&&!Z,containerId:J,pid:S.pid,flow:S.flow,pause:A});r(()=>{if(V){var e=j();e&&w&&w(e)}},[V,w]);var Q=d(),X=!M&&(null==t||!F.has(t));return"MOBILE"===Q&&j()?n(E,{shown:V,onShow:c,isContextualMessagingEnabled:X}):n(O,{shown:V,onShow:c,containerId:J,isContextualMessagingEnabled:X})};return[()=>{N=D,x=B,E=$,O=A,q=V,G=Q,L=X,F=c(()=>new Set(["CheapFlightsSearchResults","CheapFlightsSearchDeals","MobileCheapFlightsSearchResults"])),e("default",U)},[e=>(n=e.jsx,a=e.jsxs),e=>(t=e.useMemo,o=e.useState,r=e.useEffect,i=e.useRef,l=e.useCallback),e=>c=e.readOnly,e=>d=e.useViewportCategory,e=>u=e.default,e=>(p=e.default,m=e.useRtl,g=e.useLocale),e=>h=e.useUserAgent,e=>_=e.emailOptInLocales,e=>(b=e.useGoogleOneTapTermsPage,f=e.useShowGoogleOneTapTermsPageNoCloseModal),e=>v=e.default,e=>M=e.default,e=>w=e.usePopupSupressionTest,e=>(y=e.setOneTapEligibility,C=e.userSignedOut),e=>k=e.importScript,e=>T=e.useGARecorder,e=>S=e.useExperimentBucket,e=>I=e.default]]},["21h32l","o4yt4q","5vmpsm","ys6v1o","rdycz1","7thqz4","nnprhg","71uqev","nicnt2","fkji80","ympq4z","ab7lwb","cyrz7y","q7wvkq","32pwc7","v3e972","5gpqhx"]]);
